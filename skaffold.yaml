apiVersion: skaffold/v4beta9
kind: Config
metadata:
  name: ogc-api-processes-training
profiles:
  - name: coder
    manifests:
      rawYaml:
      - coder-manifests/coder.yaml
      - coder-manifests/localstack.yaml
    deploy:
      helm:
        flags:
          upgrade:
          - --install
        releases:
          - name: zoo-project-dru
            remoteChart: zoo-project/zoo-project-dru
            namespace: zoo-project
            createNamespace: true
            version: 0.3.0
            valuesFiles: []
            setValues:
              iam.enabled: false

      kubectl: 
        flags:
          global: # additional flags passed on every command.
          - --namespace=zoo-project
        hooks:
          after:
          - host:
              command: ["sh", "-c", "./wait-for-it.sh"]
              os: [darwin, linux]
      

    portForward:
      - resourceType: service
        resourceName: code-server-service
        namespace: zoo-project  # Change if using a different namespace
        port: 8080
        localPort: 8000  # Port on your local machine
      - resourceType: service
        resourceName: zoo-project-dru-service
        namespace: zoo-project  # Change if using a different namespace
        port: 80
        localPort: 8080  # Port on your local machine